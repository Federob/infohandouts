```{pyodide-python}
#| autorun: true
#| output: false
#| echo: false
import js

def _browser_input(prompt=""):
    result = js.prompt(str(prompt))
    if result is None:
        raise EOFError("Input annullato")
    return result

__builtins__.input = _browser_input
```

# Cicli

## Ripetere le operazioni

Immagina di dover stampare "Ciao" 1000 volte. Scriveresti 1000 righe di `print("Ciao")`? Ovviamente no! Ecco perchÃ© esistono i **cicli** (o loop): ti permettono di **ripetere** un blocco di codice quante volte vuoi senza impazzire.

Python ha due tipi di ciclo:

- **`for`** â€” quando sai **quante volte** ripetere ("fallo 10 volte")
- **`while`** â€” quando ripeti **finchÃ©** una condizione Ã¨ vera ("continua finchÃ© non trovi la risposta")

---

## Il ciclo `for`

### Ripetere N volte con `range()`

`range()` genera una sequenza di numeri. Ãˆ tipo un distributore automatico di numeri:

```{pyodide-python}
# Ripete 5 volte (da 0 a 4)
for i in range(5):
    print(f"Ripetizione numero {i}")
```

### Le varianti di `range()`

| Sintassi                     | Genera              | Esempio                      |
|------------------------------|----------------------|------------------------------|
| `range(n)`                   | Da 0 a n-1           | `range(5)` â†’ 0,1,2,3,4      |
| `range(inizio, fine)`        | Da inizio a fine-1   | `range(2, 6)` â†’ 2,3,4,5     |
| `range(inizio, fine, passo)` | Con salti            | `range(0, 10, 2)` â†’ 0,2,4,6,8 |

```{pyodide-python}
# Da 1 a 10
print("Da 1 a 10:")
for i in range(1, 11):
    print(i, end=" ")

print()  # A capo

# Numeri pari da 0 a 20
print("\nNumeri pari da 0 a 20:")
for i in range(0, 21, 2):
    print(i, end=" ")

print()

# Conto alla rovescia! ðŸš€
print("\nConto alla rovescia:")
for i in range(10, 0, -1):
    print(i, end=" ")
print("\nVia!")
```

### Scorrere i caratteri di una stringa

Il `for` Ã¨ anche perfetto per analizzare una stringa carattere per carattere:

```{pyodide-python}
parola = "Python"

for carattere in parola:
    print(carattere)
```

---

## Il ciclo `while`

Il `while` ripete **finchÃ© la condizione Ã¨ vera**. Ãˆ tipo "continua a mangiare finchÃ© hai fame":

```{pyodide-python}
contatore = 1

while contatore <= 5:
    print(f"Contatore: {contatore}")
    contatore += 1

print("Fine!")
```

::: {.callout-important}
## ATTENZIONE ai cicli infiniti! â™¾ï¸
Se la condizione del `while` non diventa MAI falsa, il programma si blocca in un loop eterno! Ãˆ tipo un disco rotto che ripete sempre la stessa canzone. Assicurati sempre che qualcosa cambi ad ogni giro!

```python
# âŒ ERRORE: ciclo infinito!
x = 1
while x > 0:    # x sarÃ  sempre > 0!
    print(x)
    x += 1      # x aumenta, non diminuirÃ  MAI
```
:::


### Esempio: indovina il numero ðŸŽ¯

```{pyodide-python}
import random

numero_segreto = random.randint(1, 20)
tentativi = 0

print("Indovina il numero (tra 1 e 20)!")

while True:
    tentativo = int(input("Il tuo tentativo: "))
    tentativi += 1

    if tentativo == numero_segreto:
        print(f"Bravo! Hai indovinato in {tentativi} tentativi! ðŸŽ‰")
        break
    elif tentativo < numero_segreto:
        print("Troppo basso! â¬†ï¸")
    else:
        print("Troppo alto! â¬‡ï¸")
```

---

## `break` e `continue`

Due istruzioni speciali per controllare il flusso del ciclo. Sono tipo il freno a mano e il tasto "salta" di un lettore MP3:

### `break` â€” Esci subito dal ciclo

```{pyodide-python}
# Trova il primo multiplo di 7
for i in range(1, 100):
    if i % 7 == 0:
        print(f"Il primo multiplo di 7 Ã¨: {i}")
        break  # Trovato! Me ne vado
```

### `continue` â€” Salta questa iterazione e vai alla prossima

```{pyodide-python}
# Stampa solo i numeri dispari (salta i pari)
for i in range(1, 11):
    if i % 2 == 0:
        continue  # Pari? Nah, salto!
    print(i, end=" ")
```

---

## Cicli annidati

Un ciclo dentro un altro ciclo. Ãˆ tipo l'Inception dei loop â€” un sogno dentro un sogno! Utile per lavorare con tabelle e griglie:

```{pyodide-python}
# Tabellina pitagorica (da 1 a 5)
for i in range(1, 6):
    for j in range(1, 6):
        print(f"{i*j:4}", end="")
    print()  # A capo dopo ogni riga
```

### Disegnare un triangolo di asterischi â­

```{pyodide-python}
altezza = 5

for i in range(1, altezza + 1):
    print("*" * i)
```

---

## Accumulatori e contatori

Due pattern fondamentali che userai in continuazione. Sono tipo il pane e burro della programmazione con i cicli:

### Contatore: contare quante volte succede qualcosa

```{pyodide-python}
frase = input("Scrivi una frase: ")

vocali = 0
for c in frase.lower():
    if c in "aeiou":
        vocali += 1

print(f"La frase contiene {vocali} vocali")
```

### Accumulatore: sommare valori mano a mano

```{pyodide-python}
n = int(input("Quanti numeri vuoi sommare? "))
somma = 0

for i in range(n):
    numero = float(input(f"Numero {i+1}: "))
    somma += numero

media = somma / n
print(f"Somma: {somma}")
print(f"Media: {media:.2f}")
```

---

## `for` ... `else` (sÃ¬, esiste!)

Plot twist: in Python puoi mettere un `else` dopo un ciclo! Il blocco `else` viene eseguito SOLO se il ciclo finisce **senza `break`**. Se fai `break`, l'`else` viene saltato. Ãˆ tipo: "se non hai trovato niente, allora...":

```{pyodide-python}
numeri = [4, 8, 15, 16, 23, 42]
cerca = int(input("Che numero cerchi? "))

for n in numeri:
    if n == cerca:
        print(f"Trovato: {n}! ðŸŽ¯")
        break
else:
    print(f"{cerca} non Ã¨ presente nella lista ðŸ˜•")
```

---

## Mappa concettuale

```mermaid
flowchart TD
    subgraph FOR["Ciclo for"]
        F1["for i in range(n)"] --> F2["Esegui blocco"]
        F2 --> F3{"Finito range?"}
        F3 -->|No| F2
        F3 -->|Si| F4["Esci dal ciclo"]
    end

    subgraph WHILE["Ciclo while"]
        W1["while condizione"] --> W2{"Vera?"}
        W2 -->|Si| W3["Esegui blocco"]
        W3 --> W1
        W2 -->|No| W4["Esci dal ciclo"]
    end

    subgraph CTRL["Controllo"]
        C1["break"] --> C2["Esce subito"]
        C3["continue"] --> C4["Salta al prossimo giro"]
    end
```

---

## Esercizi

### Esercizio 1: Somma da 1 a N

Calcola la somma dei numeri da 1 a N (dove N lo sceglie l'utente). SÃ¬, esiste una formula matematica, ma qui devi usare il ciclo!

```{pyodide-python}
n = int(input("Inserisci N: "))

# Calcola la somma da 1 a N con un ciclo

```

### Esercizio 2: Fattoriale

Calcola il fattoriale di un numero (es: 5! = 5 Ã— 4 Ã— 3 Ã— 2 Ã— 1 = 120). Attenzione: il fattoriale di 0 Ã¨ 1!

```{pyodide-python}
n = int(input("Inserisci un numero: "))

# Calcola il fattoriale

```

### Esercizio 3: Numeri primi

Stampa tutti i numeri primi da 2 a N. Un numero Ã¨ primo se Ã¨ divisibile solo per 1 e per se stesso. Hint: ti servirÃ  un ciclo dentro un ciclo! ðŸ¤¯

```{pyodide-python}
n = int(input("Inserisci N: "))

# Stampa i numeri primi fino a N

```
